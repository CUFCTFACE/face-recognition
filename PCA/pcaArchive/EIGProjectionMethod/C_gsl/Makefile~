####################################################################################################
#   Makefile
#
#   edited by: William Halsey
#   whalsey@g.clemson.edu
#
#   Description: This file is use to build the executable 'pca.' This is a cuda implementation of
#   the PCA algorithm.
#
#   Last edited: Jul. 16 2013
#   changed the file paths to libraries
#
all: clean totalprogram

totalprogram: grayscale.o pca.o ppm.o matrix_ops.o
	gcc -g -O3 grayscale.o pca.o ppm.o matrix_ops.o -o pca -lpthread -lcula_core -lcula_lapack -lcublas -lcudart -lgsl -latlas -lm -L/home/whalsey/ATLAS_BUILD/lib -lptcblas
    #-L/home/whalsey/cula/lib64 -L/usr/local/cuda-5.0/lib64 
    
grayscale.o: grayscale.c
	gcc -g -O3 -c grayscale.c
	#-I/home/whalsey/cula/include -I/usr/local/cuda-5.0/include

matrix_ops.o: matrix_ops.c
	gcc -g -O3 -c matrix_ops.c 
	#-I/home/whalsey/cula/include -I/usr/local/cuda-5.0/include -I/home/whalsey/gsl/gsl-1.15

pca.o: pca.c
	gcc -g -O3 -c pca.c 
	#-I/home/whalsey/cula/include -I/usr/local/cuda-5.0/include -I/home/whalsey/gsl/gsl-1.15

ppm.o: ppm.c
	gcc -g -O3 -c ppm.c 
	#-I/home/whalsey/cula/include -I/usr/local/cuda-5.0/include

clean:
	rm -rf *o pca
